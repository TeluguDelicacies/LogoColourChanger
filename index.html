<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Logo Colour Editor</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f5f5f5;
        margin: 0;
        padding: 20px;
    }
    .container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }
    .column {
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        flex: 1;
        min-width: 250px;
    }
    h2 {
        margin-top: 0;
    }
    .color-control {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }
    .color-control input[type="color"] {
        margin-right: 10px;
    }
    .color-control input[type="text"] {
        width: 100px;
        margin-right: 5px;
    }
    .copy-btn {
        cursor: pointer;
        border: none;
        background: none;
        font-size: 16px;
        color: #555;
    }
    .copy-btn:hover {
        color: black;
    }
    .number-control {
        width: 60px;
        margin-left: 10px;
    }
    .btn {
        display: inline-block;
        background: #007BFF;
        color: white;
        padding: 8px 14px;
        margin: 5px 0;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    .btn:hover {
        background: #0056b3;
    }
    .preview {
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        text-align: center;
    }
    svg {
        max-width: 300px;
        height: auto;
    }
</style>
</head>
<body>

<h1>Logo Colour Editor</h1>
<div class="container">
    <!-- Path Column -->
    <div class="column">
        <h2>Path Controls</h2>
        <div class="color-control">
            <input type="color" id="pathFillColor">
            <input type="text" id="pathFillHex">
            <button class="copy-btn" data-target="pathFillHex">ðŸ“‹</button>
        </div>
        <div class="color-control">
            <input type="color" id="pathStrokeColor">
            <input type="text" id="pathStrokeHex">
            <button class="copy-btn" data-target="pathStrokeHex">ðŸ“‹</button>
        </div>
        <div class="color-control">
            <label>Stroke Width:</label>
            <input type="number" id="pathStrokeWidth" class="number-control" min="0" step="0.5">
        </div>
        <button class="btn" id="applyPathComplement">Apply Complementary Fill</button>
    </div>

    <!-- Rectangle Column -->
    <div class="column">
        <h2>Rectangle Controls</h2>
        <div class="color-control">
            <input type="color" id="rectFillColor">
            <input type="text" id="rectFillHex">
            <button class="copy-btn" data-target="rectFillHex">ðŸ“‹</button>
        </div>
        <div class="color-control">
            <input type="color" id="rectStrokeColor">
            <input type="text" id="rectStrokeHex">
            <button class="copy-btn" data-target="rectStrokeHex">ðŸ“‹</button>
        </div>
        <div class="color-control">
            <label>Stroke Width:</label>
            <input type="number" id="rectStrokeWidth" class="number-control" min="0" step="0.5">
        </div>
        <button class="btn" id="applyRectComplement">Apply Complementary Fill</button>
    </div>

    <!-- Preview -->
    <div class="preview">
        <div id="svgPreview">Loading SVG...</div>
        <br>
        <input type="text" id="fileName" placeholder="File name (without extension)">
        <br>
        <button class="btn" id="downloadPNG">Download PNG</button>
        <button class="btn" id="downloadPNG2x">Download PNG (2Ã—)</button>
        <button class="btn" id="downloadSVG">Download SVG</button>
    </div>
</div>

<script>
// Utility: hex to complementary
function getComplementary(hex) {
    let rgb = parseInt(hex.slice(1), 16);
    let r = (rgb >> 16) & 0xff;
    let g = (rgb >> 8) & 0xff;
    let b = rgb & 0xff;
    let comp = (0xFFFFFF ^ (r << 16 | g << 8 | b)).toString(16).padStart(6, '0');
    return `#${comp.toUpperCase()}`;
}

let svgDoc, pathEl, rectEl;

// Load SVG from file
fetch('logo.svg')
.then(res => res.text())
.then(data => {
    document.getElementById('svgPreview').innerHTML = data;
    svgDoc = document.getElementById('svgPreview').querySelector('svg');
    pathEl = svgDoc.querySelector('[id="TD Path"]');
    rectEl = svgDoc.querySelector('[id="Square Behind TD"]');

    // Default values
    setColorInputs('pathFillColor', 'pathFillHex', '#FFFFFF');
    setColorInputs('pathStrokeColor', 'pathStrokeHex', '#000000');
    document.getElementById('pathStrokeWidth').value = 2;

    setColorInputs('rectFillColor', 'rectFillHex', '#EEDC29');
    setColorInputs('rectStrokeColor', 'rectStrokeHex', '#EEDC29');
    document.getElementById('rectStrokeWidth').value = 0;

    updateSVG();
});

// Sync color pickers and hex inputs
function setColorInputs(colorId, hexId, value) {
    document.getElementById(colorId).value = value;
    document.getElementById(hexId).value = value.toUpperCase();
}

// Update SVG on change
function updateSVG() {
    pathEl.setAttribute('fill', document.getElementById('pathFillColor').value);
    pathEl.setAttribute('stroke', document.getElementById('pathStrokeColor').value);
    pathEl.setAttribute('stroke-width', document.getElementById('pathStrokeWidth').value);

    rectEl.setAttribute('fill', document.getElementById('rectFillColor').value);
    rectEl.setAttribute('stroke', document.getElementById('rectStrokeColor').value);
    rectEl.setAttribute('stroke-width', document.getElementById('rectStrokeWidth').value);
}

// Link inputs
['pathFillColor', 'pathStrokeColor', 'rectFillColor', 'rectStrokeColor'].forEach(id => {
    document.getElementById(id).addEventListener('input', e => {
        let hexId = id.replace('Color', 'Hex');
        document.getElementById(hexId).value = e.target.value.toUpperCase();
        updateSVG();
    });
});

['pathFillHex', 'pathStrokeHex', 'rectFillHex', 'rectStrokeHex'].forEach(id => {
    document.getElementById(id).addEventListener('input', e => {
        let colorId = id.replace('Hex', 'Color');
        document.getElementById(colorId).value = e.target.value;
        updateSVG();
    });
});

['pathStrokeWidth', 'rectStrokeWidth'].forEach(id => {
    document.getElementById(id).addEventListener('input', updateSVG);
});

// Copy buttons
document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        let input = document.getElementById(btn.dataset.target);
        input.select();
        document.execCommand('copy');
    });
});

// Complementary buttons
document.getElementById('applyPathComplement').addEventListener('click', () => {
    let rectColor = document.getElementById('rectFillColor').value;
    let comp = getComplementary(rectColor);
    setColorInputs('pathFillColor', 'pathFillHex', comp);
    updateSVG();
});

document.getElementById('applyRectComplement').addEventListener('click', () => {
    let pathColor = document.getElementById('pathFillColor').value;
    let comp = getComplementary(pathColor);
    setColorInputs('rectFillColor', 'rectFillHex', comp);
    updateSVG();
});

// Download PNG
function downloadPNG(scale=1) {
    let serializer = new XMLSerializer();
    let source = serializer.serializeToString(svgDoc);
    let img = new Image();
    img.onload = function() {
        let canvas = document.createElement('canvas');
        canvas.width = img.width * scale;
        canvas.height = img.height * scale;
        let ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
        let link = document.createElement('a');
        link.download = (document.getElementById('fileName').value || 'logo') + '.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
    };
    img.src = 'data:image/svg+xml;base64,' + btoa(source);
}

document.getElementById('downloadPNG').addEventListener('click', () => downloadPNG(1));
document.getElementById('downloadPNG2x').addEventListener('click', () => downloadPNG(2));

// Download SVG
document.getElementById('downloadSVG').addEventListener('click', () => {
    let serializer = new XMLSerializer();
    let source = serializer.serializeToString(svgDoc);
    let blob = new Blob([source], { type: 'image/svg+xml;charset=utf-8' });
    let link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = (document.getElementById('fileName').value || 'logo') + '.svg';
    link.click();
});
</script>

</body>
</html>
