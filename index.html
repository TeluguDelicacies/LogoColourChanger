<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SVG Color Tool</title>
<style>
    body {
        font-family: 'Segoe UI', sans-serif;
        background: #f5f5f5;
        margin: 0;
        padding: 0;
        display: flex;
        height: 100vh;
    }

    .container {
        display: flex;
        width: 100%;
        gap: 20px;
        padding: 20px;
        box-sizing: border-box;
    }

    .controls {
        flex: 0 0 350px;
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
        gap: 20px;
        overflow-y: auto;
    }

    .section {
        display: flex;
        flex-direction: column;
        gap: 10px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
    }

    .section h3 {
        margin: 0;
        font-size: 16px;
        color: #333;
        border-bottom: 1px solid #ddd;
        padding-bottom: 5px;
    }

    .input-group {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .input-group input[type="text"], .input-group input[type="number"] {
        flex: 1;
        padding: 5px;
        border-radius: 4px;
        border: 1px solid #ccc;
        font-size: 14px;
    }

    .input-group input[type="color"] {
        width: 40px;
        height: 40px;
        padding: 0;
        border: none;
        background: none;
        cursor: pointer;
    }

    .copy-btn {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 18px;
        color: #666;
    }

    .btn {
        background: #6200ea;
        color: #fff;
        border: none;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.3s;
        width: 100%;
    }

    .btn:hover {
        background: #4b00b5;
    }

    .preview {
        flex: 1;
        background: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 10px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        padding: 20px;
    }

    svg {
        max-width: 100%;
        max-height: 90%;
    }
</style>
</head>
<body>

<div class="container">
    <div class="controls">
        <div class="section">
            <h3>Path</h3>
            <div class="input-group">
                <input type="color" id="pathFill" value="#FFFFFF">
                <input type="text" id="pathFillHex" value="#FFFFFF">
                <button class="copy-btn" onclick="copyHex('pathFillHex')">ðŸ“‹</button>
            </div>
            <button class="btn" onclick="applyComplementary('pathFill', 'rectFill')">Apply Complementary to Rectangle</button>
            <button class="btn" onclick="undoFill('pathFill')">Undo Fill</button>

            <div class="input-group">
                <input type="color" id="pathStroke" value="#000000">
                <input type="text" id="pathStrokeHex" value="#000000">
                <button class="copy-btn" onclick="copyHex('pathStrokeHex')">ðŸ“‹</button>
            </div>
            <div class="input-group">
                <label>Width:</label>
                <input type="number" id="pathStrokeWidth" value="2" min="0">
            </div>
        </div>

        <div class="section">
            <h3>Rectangle</h3>
            <div class="input-group">
                <input type="color" id="rectFill" value="#EEDC29">
                <input type="text" id="rectFillHex" value="#EEDC29">
                <button class="copy-btn" onclick="copyHex('rectFillHex')">ðŸ“‹</button>
            </div>
            <button class="btn" onclick="applyComplementary('rectFill', 'pathFill')">Apply Complementary to Path</button>
            <button class="btn" onclick="undoFill('rectFill')">Undo Fill</button>

            <div class="input-group">
                <input type="color" id="rectStroke" value="#EEDC29">
                <input type="text" id="rectStrokeHex" value="#EEDC29">
                <button class="copy-btn" onclick="copyHex('rectStrokeHex')">ðŸ“‹</button>
            </div>
            <div class="input-group">
                <label>Width:</label>
                <input type="number" id="rectStrokeWidth" value="0" min="0">
            </div>
        </div>

        <div class="section">
            <h3>Download</h3>
            <input type="text" id="fileName" placeholder="Enter file name" value="logo">
            <button id="exportPNG" class="btn">Download PNG</button>
            <button id="export2x" class="btn">Download PNG<br>(Higher Resolution)</button>
            <button id="exportSVG" class="btn">Download SVG</button>
        </div>
    </div>

    <div class="preview" id="preview">
        <!-- SVG will be injected here -->
    </div>
</div>

<script>
    let originalFills = {};

    function copyHex(inputId) {
        const val = document.getElementById(inputId).value;
        navigator.clipboard.writeText(val);
    }

    function hexToRgb(hex) {
        hex = hex.replace('#','');
        if(hex.length===3){
            hex = hex.split('').map(c => c+c).join('');
        }
        const bigint = parseInt(hex, 16);
        return [(bigint >> 16) & 255, (bigint >> 8) & 255, bigint & 255];
    }

    function rgbToHex(r, g, b) {
        return "#" + [r,g,b].map(x => {
            const hex = x.toString(16);
            return hex.length === 1 ? '0' + hex : hex;
        }).join('');
    }

    function getComplementary(hex) {
        const [r,g,b] = hexToRgb(hex);
        return rgbToHex(255-r, 255-g, 255-b);
    }

    function applyComplementary(fromId, toId) {
        const fromColor = document.getElementById(fromId).value;
        const comp = getComplementary(fromColor);
        const targetInput = document.getElementById(toId);
        const targetHex = document.getElementById(toId + "Hex");
        if (!originalFills[toId]) originalFills[toId] = targetInput.value;
        targetInput.value = comp;
        targetHex.value = comp;
        applyColors();
    }

    function undoFill(id) {
        if (originalFills[id]) {
            document.getElementById(id).value = originalFills[id];
            document.getElementById(id + "Hex").value = originalFills[id];
            applyColors();
        }
    }

    function syncInputs(colorId, hexId) {
        const colorInput = document.getElementById(colorId);
        const hexInput = document.getElementById(hexId);

        colorInput.addEventListener('input', () => {
            hexInput.value = colorInput.value.toUpperCase();
            applyColors();
        });

        hexInput.addEventListener('input', () => {
            if (/^#([0-9A-F]{3}){1,2}$/i.test(hexInput.value)) {
                colorInput.value = hexInput.value;
                applyColors();
            }
        });
    }

    function applyColors() {
        const path = document.querySelector('#preview svg path');
        const rect = document.querySelector('#preview svg rect');

        if (path) {
            path.setAttribute('fill', document.getElementById('pathFill').value);
            path.setAttribute('stroke', document.getElementById('pathStroke').value);
            path.setAttribute('stroke-width', document.getElementById('pathStrokeWidth').value);
        }

        if (rect) {
            rect.setAttribute('fill', document.getElementById('rectFill').value);
            rect.setAttribute('stroke', document.getElementById('rectStroke').value);
            rect.setAttribute('stroke-width', document.getElementById('rectStrokeWidth').value);
        }
    }

    function downloadSVG() {
        const svg = document.querySelector('#preview svg');
        const serializer = new XMLSerializer();
        const source = serializer.serializeToString(svg);
        const blob = new Blob([source], { type: 'image/svg+xml;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = document.getElementById('fileName').value + ".svg";
        link.click();
        URL.revokeObjectURL(url);
    }

    function downloadPNG(scale=1) {
        const svg = document.querySelector('#preview svg');
        const serializer = new XMLSerializer();
        const source = serializer.serializeToString(svg);
        const img = new Image();
        img.onload = function() {
            const canvas = document.createElement('canvas');
            canvas.width = img.width * scale;
            canvas.height = img.height * scale;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = document.getElementById('fileName').value + ".png";
                link.click();
                URL.revokeObjectURL(url);
            });
        };
        img.src = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(source);
    }

    document.getElementById('exportPNG').addEventListener('click', () => downloadPNG(1));
    document.getElementById('export2x').addEventListener('click', () => downloadPNG(2));
    document.getElementById('exportSVG').addEventListener('click', downloadSVG);

    // Sync fields
    syncInputs('pathFill','pathFillHex');
    syncInputs('pathStroke','pathStrokeHex');
    syncInputs('rectFill','rectFillHex');
    syncInputs('rectStroke','rectStrokeHex');

    // Load SVG inline
    fetch('logo.svg')
        .then(res => res.text())
        .then(svgData => {
            document.getElementById('preview').innerHTML = svgData;
            applyColors();
        });
</script>
</body>
</html>
