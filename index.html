<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SVG Color Editor</title>
<style>
    body {
        font-family: "Roboto", sans-serif;
        background: #f4f5f7;
        margin: 0;
        padding: 0;
        color: #333;
    }
    header {
        background: #6200ea;
        color: white;
        padding: 1rem;
        text-align: center;
        font-size: 1.5rem;
        font-weight: 500;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .container {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 1rem;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
    }
    .preview {
        grid-column: span 2;
        background: white;
        padding: 1rem;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 300px;
    }
    .controls {
        background: white;
        padding: 1rem;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .control-group {
        margin-bottom: 1.5rem;
    }
    label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
    }
    .input-row {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    input[type="color"], input[type="text"], input[type="number"] {
        flex: 1;
        padding: 0.4rem;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 0.9rem;
    }
    button {
        background: #6200ea;
        color: white;
        border: none;
        padding: 0.6rem 1rem;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s ease;
        font-size: 0.9rem;
    }
    button:hover {
        background: #4e00b5;
    }
    .icon-btn {
        background: none;
        border: none;
        cursor: pointer;
        padding: 0.3rem;
    }
    .icon-btn svg {
        width: 18px;
        height: 18px;
        fill: #555;
    }
    .downloads {
        grid-column: span 2;
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }
    .undo-btn {
        background: #ff5722;
        margin-top: 0.5rem;
    }
    .undo-btn:hover {
        background: #d84315;
    }
</style>
</head>
<body>
<header>SVG Color Editor</header>

<div class="container">
    <div class="preview" id="preview"></div>

    <!-- Path Controls -->
    <div class="controls">
        <h3>Path Controls</h3>
        <div class="control-group">
            <label>Fill Color</label>
            <div class="input-row">
                <input type="color" id="pathFillColor">
                <input type="text" id="pathFillHex">
                <button class="icon-btn" id="copyPathFill">
                    ðŸ“‹
                </button>
            </div>
            <button id="applyComplToRect">Apply Complimentary to Rectangle</button>
            <button id="undoPathFill" class="undo-btn" style="display:none;">Undo</button>
        </div>
        <div class="control-group">
            <label>Stroke Color</label>
            <div class="input-row">
                <input type="color" id="pathStrokeColor">
                <input type="text" id="pathStrokeHex">
                <button class="icon-btn" id="copyPathStroke">
                    ðŸ“‹
                </button>
            </div>
        </div>
        <div class="control-group">
            <label>Stroke Width</label>
            <input type="number" id="pathStrokeWidth" min="0" step="0.5">
        </div>
    </div>

    <!-- Rectangle Controls -->
    <div class="controls">
        <h3>Rectangle Controls</h3>
        <div class="control-group">
            <label>Fill Color</label>
            <div class="input-row">
                <input type="color" id="rectFillColor">
                <input type="text" id="rectFillHex">
                <button class="icon-btn" id="copyRectFill">
                    ðŸ“‹
                </button>
            </div>
            <button id="applyComplToPath">Apply Complimentary to Path</button>
            <button id="undoRectFill" class="undo-btn" style="display:none;">Undo</button>
        </div>
        <div class="control-group">
            <label>Stroke Color</label>
            <div class="input-row">
                <input type="color" id="rectStrokeColor">
                <input type="text" id="rectStrokeHex">
                <button class="icon-btn" id="copyRectStroke">
                    ðŸ“‹
                </button>
            </div>
        </div>
        <div class="control-group">
            <label>Stroke Width</label>
            <input type="number" id="rectStrokeWidth" min="0" step="0.5">
        </div>
    </div>

    <!-- Downloads -->
    <div class="downloads">
        <input type="text" id="fileName" placeholder="Enter file name">
        <button id="downloadPNG">Download PNG</button>
        <button id="downloadPNG2x">Download PNG (2Ã—)</button>
        <button id="downloadSVG">Download SVG</button>
    </div>
</div>

<script>
// Load external SVG into preview
fetch('logo.svg')
    .then(res => res.text())
    .then(data => {
        document.getElementById('preview').innerHTML = data;
        initEditor();
    });

function hexToComplimentary(hex) {
    let r = parseInt(hex.substr(1, 2), 16);
    let g = parseInt(hex.substr(3, 2), 16);
    let b = parseInt(hex.substr(5, 2), 16);
    r = 255 - r; g = 255 - g; b = 255 - b;
    return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
}

function initEditor() {
    const path = document.querySelector('svg path');
    const rect = document.querySelector('svg rect');

    let lastPathFill = null;
    let lastRectFill = null;

    const bindColorControl = (colorInput, hexInput, copyBtn, target, attr) => {
        colorInput.addEventListener('input', () => {
            target.setAttribute(attr, colorInput.value);
            hexInput.value = colorInput.value.toUpperCase();
        });
        hexInput.addEventListener('input', () => {
            if(/^#([0-9A-Fa-f]{6})$/.test(hexInput.value)) {
                colorInput.value = hexInput.value;
                target.setAttribute(attr, hexInput.value);
            }
        });
        copyBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(hexInput.value);
        });
    };

    bindColorControl(
        document.getElementById('pathFillColor'),
        document.getElementById('pathFillHex'),
        document.getElementById('copyPathFill'),
        path, 'fill'
    );
    bindColorControl(
        document.getElementById('pathStrokeColor'),
        document.getElementById('pathStrokeHex'),
        document.getElementById('copyPathStroke'),
        path, 'stroke'
    );
    bindColorControl(
        document.getElementById('rectFillColor'),
        document.getElementById('rectFillHex'),
        document.getElementById('copyRectFill'),
        rect, 'fill'
    );
    bindColorControl(
        document.getElementById('rectStrokeColor'),
        document.getElementById('rectStrokeHex'),
        document.getElementById('copyRectStroke'),
        rect, 'stroke'
    );

    document.getElementById('pathStrokeWidth').addEventListener('input', e => {
        path.setAttribute('stroke-width', e.target.value);
    });
    document.getElementById('rectStrokeWidth').addEventListener('input', e => {
        rect.setAttribute('stroke-width', e.target.value);
    });

    // Apply & Undo Complimentary
    document.getElementById('applyComplToRect').addEventListener('click', () => {
        lastRectFill = rect.getAttribute('fill');
        const comp = hexToComplimentary(path.getAttribute('fill'));
        rect.setAttribute('fill', comp);
        document.getElementById('rectFillColor').value = comp;
        document.getElementById('rectFillHex').value = comp;
        document.getElementById('undoPathFill').style.display = 'block';
    });
    document.getElementById('undoPathFill').addEventListener('click', () => {
        if(lastRectFill) {
            rect.setAttribute('fill', lastRectFill);
            document.getElementById('rectFillColor').value = lastRectFill;
            document.getElementById('rectFillHex').value = lastRectFill;
        }
        document.getElementById('undoPathFill').style.display = 'none';
    });

    document.getElementById('applyComplToPath').addEventListener('click', () => {
        lastPathFill = path.getAttribute('fill');
        const comp = hexToComplimentary(rect.getAttribute('fill'));
        path.setAttribute('fill', comp);
        document.getElementById('pathFillColor').value = comp;
        document.getElementById('pathFillHex').value = comp;
        document.getElementById('undoRectFill').style.display = 'block';
    });
    document.getElementById('undoRectFill').addEventListener('click', () => {
        if(lastPathFill) {
            path.setAttribute('fill', lastPathFill);
            document.getElementById('pathFillColor').value = lastPathFill;
            document.getElementById('pathFillHex').value = lastPathFill;
        }
        document.getElementById('undoRectFill').style.display = 'none';
    });

    // Download PNG
    document.getElementById('downloadPNG').addEventListener('click', () => downloadImage(1));
    document.getElementById('downloadPNG2x').addEventListener('click', () => downloadImage(2));
    document.getElementById('downloadSVG').addEventListener('click', () => {
        const fileName = document.getElementById('fileName').value || 'logo';
        const blob = new Blob([document.querySelector('svg').outerHTML], {type: 'image/svg+xml'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = fileName + '.svg';
        a.click();
        URL.revokeObjectURL(url);
    });

    function downloadImage(scale) {
        const svg = document.querySelector('svg');
        const svgData = new XMLSerializer().serializeToString(svg);
        const canvas = document.createElement('canvas');
        const bbox = svg.getBBox();
        canvas.width = bbox.width * scale;
        canvas.height = bbox.height * scale;
        const ctx = canvas.getContext('2d');
        const img = new Image();
        const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
        const url = URL.createObjectURL(svgBlob);
        img.onload = () => {
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            URL.revokeObjectURL(url);
            const a = document.createElement('a');
            a.download = (document.getElementById('fileName').value || 'logo') + '.png';
            a.href = canvas.toDataURL('image/png');
            a.click();
        };
        img.src = url;
    }
}
</script>
</body>
</html>
